function Actor () {
  if(typeof Actor.instance === "object"){
    return Actor.instance;
  }

  this.element  = document.getElementById("actor");
}
 
/**
 * Get Axis the Actor element
 * @param  {String} axis
 * @return {Inter}
 */
Actor.prototype.getAxis = function(axis) {
  if(axis === "x"){
    return this.element.offsetLeft + ( this.element.offsetWidth / 2 );
  }
  if(axis === "y"){
    return this.element.offsetTop;
  }
};

Actor.prototype.moveShortToTop = function() {
  var increase = this.getAxis('y') - 5;
  
  this.changeClass('rotate-to-up');
  this.element.style.top = increase + "px";
};

Actor.prototype.moveShortToDown = function() {
  var decrements = this.getAxis('y') + 5 ;

  this.changeClass('rotate-to-down');
  this.element.style.top = decrements + "px";
};

Actor.prototype.moveShortToLeft = function() {
  var increase = this.getAxis('x') - 5; 

  this.changeClass('rotate-to-left');
  this.element.style.left = increase + "px";
};

Actor.prototype.moveShortToRight = function() {
  var decrements = this.getAxis('x') + 5;

  this.changeClass('rotate-to-right');
  this.element.style.left = decrements + "px";
};

Actor.prototype.moveShortToTopRight = function() {
  var 
    increaseY = this.getAxis('y') - 5,
    increaseX = this.getAxis('x') + 5;

  this.changeClass('rotate-to-top-right');
  this.element.style.top  = increaseY + "px";
  this.element.style.left = increaseX + "px";

};

Actor.prototype.moveShortToTopLeft = function() {
  var 
    increaseY = this.getAxis('y') - 5,
    increaseX = this.getAxis('x') - 5;

  this.changeClass('rotate-to-top-left');
  this.element.style.top  = increaseY + "px";
  this.element.style.left = increaseX + "px";

};

Actor.prototype.moveShortToDownRight = function() {
  var 
    increaseY = this.getAxis('y') + 5,
    increaseX = this.getAxis('x') - 5;

  this.changeClass('rotate-to-down-right');
  this.element.style.top  = increaseY + "px";
  this.element.style.left = increaseX + "px";

};

Actor.prototype.moveShortToDownLeft = function() {
  var 
    increaseY = this.getAxis('y') + 5,
    increaseX = this.getAxis('x') + 5;

  this.changeClass('rotate-to-down-left');
  this.element.style.top  = increaseY + "px";
  this.element.style.left = increaseX + "px";

};



Actor.prototype.changeClass = function(newValue) {
  var 
    classReg = new RegExp(newValue),
    oldClass = this.element.className,
    newClass = ""; 

    //Verify if newClass existe
    if( ! classReg.test(oldClass) ) {
      //Remove All class with started 'rotate-'
      newClass = oldClass.replace(/ rotate.*/,"");

      //New string class
      newClass += " " + newValue;
      
      this.element.className = newClass;
    }

};


;function Controller () {
	if(typeof Controller.instance === "object"){
		return Controller.instance;
	}

	this.actor = new Actor();
	this.keysMoveActor = [
		37, // left 
		38, // up
		39, // right
		40, // down
		65, // top right
		83, // top left
		68, // down right
		70  // down left 
	];
}


Controller.prototype.moveActor = function() {
	self = this;
	window.onkeydown = function(e){
		if(e.which === self.keysMoveActor[0] ) {
			self.actor.moveShortToLeft();
		}
		else if(e.which === self.keysMoveActor[1] ) {
			self.actor.moveShortToTop();
		}
		else if(e.which === self.keysMoveActor[2] ) {
			self.actor.moveShortToRight();
		}
		else if(e.which === self.keysMoveActor[3] ) {
			self.actor.moveShortToDown();				
		}
		else if(e.which === self.keysMoveActor[4]) {
			self.actor.moveShortToTopRight();				
		}
		else if(e.which === self.keysMoveActor[5]) {
			self.actor.moveShortToTopLeft();				
		}
		else if(e.which === self.keysMoveActor[6]) {
			self.actor.moveShortToDownRight();				
		}
		else if(e.which === self.keysMoveActor[7]) {
			self.actor.moveShortToDownLeft();				
		}

	
	};
};;function View () {
	this.controller = new Controller();
}

View.prototype.init = function() {
	this.controller.moveActor();
};;window.onload = function (argument) {
	var game = new View().init();
};
